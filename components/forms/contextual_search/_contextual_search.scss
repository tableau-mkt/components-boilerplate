/*
Contextual Search

Contextual search (AKA section search) form for section-specific searches.

Upon submitting (e.g., pressing ENTER or clicking the search submit icon) an
intermediate search results list is shown in the context of the page (provided
via AJAX).

More results text, at the bottom of the intermediate search results list, allows
you to continue to the full results page.

Down/up arrow keys allow you to select a results row, and clicking outside the
search component will close the search results.

Markup: contextual-search.hbs

Weight: 10

Style guide: forms.contextual-search
*/

.contextual-search {
  position: relative;
  margin: 2em auto;
  width: 60%;
  max-width: 650px;
  min-height: 4em;
  @include breakpoint($mobile-only) {
    width: 100%;
  }

  .contextual-search__ui {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    background: $bg-light-gray-1;
    box-shadow: 2px 2px 3px $accent-dividers inset;
    border-radius: 2em;
    z-index: $zindex-dropdown;
    @include breakpoint($mobile-only) {
      left: 1em;
      right: 1em;
    }
  }

  .contextual-search__form {
    position: relative;
  }

  .contextual-search__input {
    $base: 20px;
    width: 100%;
    height: em(64px, $base);
    margin: 0;
    padding: em(18px, $base) em(64px, $base) em(18px, $base) em(32px, $base);
    background: none;
    outline: 0;
    border: 0;
    font-size: em($base);
    line-height: normal;
    color: $text-medium-body;
    font-family: $text--merriweather-light;

    &::placeholder {
      color: $text-light-body;
    }
    // We want additional behavior with our own cancel/reset button, so hide
    // Chrome's cancel button.
    &::-webkit-search-cancel-button {
      display: none;
    }
    // This must be separate to work. Go figure.
    &::-ms-clear {
      display: none;
    }
  }

  .contextual-search__button {
    // Define the base font size, scoped to this selector.
    $base: 24px;
    position: absolute;
    top: 0;
    right: em(5px, $base);
    width: em(64px, $base);
    height: em(64px, $base);
    padding: 0;
    border: 0;
    outline: 0;
    background: transparent;
    font-size: em($base);
    line-height: 1;
    cursor: pointer;
  }

  .contextual-search__reset {
    display: none;
  }

  /* when component is open */
  &.is-open {
    .contextual-search__ui {
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
    }
    .contextual-search__reset {
      display: block;
    }
    .contextual-search__submit {
      display: none;
    }
  }

  .contextual-search__results {
    margin: 0;
    padding: 0;
    display: none;
  }

  &.is-open .contextual-search__results {
    display: block;
  }

  .contextual-search__results-row {
    display: block;
    padding: em(18px) em(32px);
    color: inherit;
    @include break;
    @extend %clearfix;
    border-bottom: 1px solid $accent-dividers;
    font-family: $text--benton-book;
    background: rgba($bg-light-gray-2, 0.5);
    text-decoration: none;
    &:last-child {
      border-bottom: 0;
    }
    &.is-selected,
    &:hover {
      background: $bg-white;
    }
  }

  .contextual-search__title {
    @include span(9);
    @extend .text--body-base;
  }

  .contextual-search__meta {
    display: table-cell;
    @include span(3 at 0 isolate rtl);
    text-align: right;
    vertical-align: middle;
    @extend .text--label;
  }

  .contextual-search__category {
    @include span(9);
    @extend .text--label;
  }

  .contextual-search__more {
    $base: 11px;
    display: block;
    padding: em(18px, $base) em(32px, $base);
    border-radius: 0 0 em(32px, $base) em(32px, $base);
    text-align: center;
    color: $text-link;
    @extend .text--label;
    &:hover {
      text-decoration: none;
    }
  }
}
